{% extends 'core/base.html' %}
{% block content %}
<h2>Notificaciones</h2>
<div class="mb-3">
    <a href="{% url 'users:admin_dashboard' %}" class="btn btn-outline-secondary btn-sm">Volver al Panel de Administración</a>
</div>
{% if notifications and notifications|length > 0 %}
    <ul class="list-group">
        {% for notification in notifications %}
        <li class="list-group-item d-flex justify-content-between align-items-center {% if not notification.is_read %}font-weight-bold{% endif %}">
            <div>
                <span>{{ notification.message }}</span>
                <span class="badge bg-info text-dark ms-2">{{ notification.get_status_display }}</span>
                <span class="text-muted ms-2">{{ notification.created_at|date:'d/m/Y H:i' }}</span>
            </div>
            <div>
                {% if not notification.is_read %}
                    <a href="{% url 'users:mark_notification_read' notification.id %}" class="btn btn-sm btn-success me-1">Marcar como leída</a>
                {% endif %}
                <a href="{% url 'users:notification_detail' notification.id %}" class="btn btn-sm btn-primary">Ver detalles</a>
            </div>
        </li>
        {% endfor %}
    </ul>
{% else %}
    <ul class="list-group">
        <li class="list-group-item d-flex justify-content-between align-items-center font-weight-bold">
            <div>
                Imagen RX de tórax cargada el 10/12/2025 está <span class="badge bg-info text-dark ms-2">En análisis</span>
                <span class="text-muted ms-2">10/12/2025 18:00</span>
            </div>
            <div>
                <button class="btn btn-sm btn-success me-1" disabled>Marcar como leída</button>
                <button class="btn btn-sm btn-primary" disabled>Ver detalles</button>
            </div>
        </li>
    </ul>
    <div class="alert alert-info mt-2">No hay notificaciones nuevas.</div>
{% endif %}
{% endblock %}
