{% extends 'core/base.html' %}
{% block content %}
<div class="dashboard-wrapper user-list-page">
    <div class="dashboard-container">
        <div class="section-header">
            <h2 class="section-title">Monitoreo de Actividad del Sistema</h2>
            <a href="{% url 'users:admin_dashboard' %}" class="section-link">Volver al Dashboard →</a>
        </div>
        <div class="users-table-container">
            <form method="get" class="mb-3 d-flex flex-wrap gap-2">
                <input type="text" name="usuario" class="form-control form-control-sm" placeholder="Usuario">
                <input type="date" name="fecha" class="form-control form-control-sm">
                <select name="tipo" class="form-control form-control-sm">
                    <option value="">Tipo de evento</option>
                    <option value="login">Acceso</option>
                    <option value="operacion">Operación</option>
                </select>
                <button type="submit" class="btn btn-primary btn-sm">Filtrar</button>
                <a href="?export=1" class="btn btn-outline-success btn-sm">Exportar</a>
            </form>
            {% if logs and logs|length > 0 %}
            <table class="users-table">
                <thead>
                    <tr>
                        <th>Usuario</th>
                        <th>Fecha</th>
                        <th>Tipo</th>
                        <th>Descripción</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in logs %}
                    <tr>
                        <td>
                            <div class="user-avatar-cell">
                                <div class="user-avatar-small">{{ log.usuario|slice:":2"|upper }}</div>
                                <div class="user-info-cell">
                                    <span class="user-name">{{ log.usuario }}</span>
                                </div>
                            </div>
                        </td>
                        <td><span class="text-muted">{{ log.fecha }}</span></td>
                        <td>
                            {% if log.tipo == 'login' %}
                                <span class="badge badge-info">Acceso</span>
                            {% else %}
                                <span class="badge badge-warning">Operación</span>
                            {% endif %}
                        </td>
                        <td>{{ log.descripcion }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="empty-state">
                <h3 class="empty-state-title">No hay registros recientes</h3>
                <p class="empty-state-description">No se encontraron logs de actividad en el sistema.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
